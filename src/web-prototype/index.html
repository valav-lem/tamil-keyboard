<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Yazhi Tamil Keyboard Prototype</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#333333">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Yazhi Tamil Keyboard by yThozhar</h1>
        <p>Tholkappiam (PM0100) Layout Prototype <span id="status-indicator" style="font-size: 0.8em; color: green;">(Online)</span></p>
        
        <div class="suggestion-bar" id="suggestion-bar">
            <!-- Suggestions will appear here -->
        </div>

        <div class="editor-toolbar">
            <button onclick="clearText()" class="toolbar-btn" title="Clear Text">üóëÔ∏è Clear</button>
            <button onclick="copyText()" class="toolbar-btn" title="Copy to Clipboard">üìã Copy</button>
        </div>

        <div class="meta-bar">
            <span class="meta-pill" id="layout-mode">Mode: Tamil</span>
            <span class="meta-pill" id="typing-stats">Chars: 0 | Words: 0 | Lines: 1</span>
        </div>

        <div class="typewriter-container">
            <div class="line-numbers" id="line-numbers">1</div>
            <textarea id="output" placeholder="‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æ§‡Æü‡Øç‡Æü‡Æö‡Øç‡Æö‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç..." spellcheck="false" oninput="updateLineNumbers()" onscroll="syncScroll()"></textarea>
        </div>
        
        <div class="keyboard" id="keyboard">
            <!-- Keyboard rows will be generated here by JS -->
        </div>

        <div class="toast" id="toast" aria-live="polite"></div>
    </div>

    <script src="keyboard.js"></script>
    <script>
        // Register Service Worker for Offline Support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    }, (err) => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

        // Update online/offline status
        const statusIndicator = document.getElementById('status-indicator');
        window.addEventListener('online', () => {
            statusIndicator.textContent = '(Online)';
            statusIndicator.style.color = 'green';
        });
        window.addEventListener('offline', () => {
            statusIndicator.textContent = '(Offline - Local Processing)';
            statusIndicator.style.color = 'orange';
        });
        if (!navigator.onLine) {
            statusIndicator.textContent = '(Offline - Local Processing)';
            statusIndicator.style.color = 'orange';
        }
    </script>
</body>
</html>
